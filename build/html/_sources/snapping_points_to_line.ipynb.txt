{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "import geopandas as gpd\n",
    "import pandas as pd\n",
    "import matplotlib.pyplot as plt\n",
    "import networkx as nx\n",
    "from shapely.geometry import box, LineString, Point,MultiPoint\n",
    "import os\n",
    "import sys\n",
    "import fiona\n",
    "from scipy.spatial import cKDTree\n",
    "import numpy as np\n",
    "from shapely import wkt\n",
    "import time\n",
    "from rtree import index\n",
    "\n",
    "sys.path.append(os.path.realpath('..'))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Line data"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "shp_file = r\"../intermediate_data/lion_gdf2012/lion_gdf2012.shp\"\n",
    "lion_gdf = gpd.read_file(shp_file)\n",
    "lion_gdf.crs = {'init': 'epsg:4326'}"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Point data from the Sidewalk Café Licenses and Applications"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "fp = r\"https://data.cityofnewyork.us/api/views/qcdj-rwhu/rows.csv?accessType=DOWNLOAD\"\n",
    "sidewalk_df = pd.read_csv(fp)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "sidewalk_df['geometry'] =  list(zip(sidewalk_df['LONGITUDE'], sidewalk_df['LATITUDE']))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "sidewalk_df['geometry'] = sidewalk_df['geometry'].apply(Point)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "sidewalk_gdf = gpd.GeoDataFrame(sidewalk_df, geometry='geometry',crs = {'init': 'epsg:4326'})"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>LICENSE_NBR</th>\n",
       "      <th>LIC_STATUS</th>\n",
       "      <th>BUSINESS_NAME</th>\n",
       "      <th>BUSINESS_NAME2</th>\n",
       "      <th>BUILDING</th>\n",
       "      <th>STREET</th>\n",
       "      <th>CITY</th>\n",
       "      <th>STATE</th>\n",
       "      <th>ZIP</th>\n",
       "      <th>SWC_TYPE</th>\n",
       "      <th>...</th>\n",
       "      <th>HEARING_DD</th>\n",
       "      <th>HEARING_PUBLIC</th>\n",
       "      <th>HEARING_PUBLIC_DD</th>\n",
       "      <th>CC</th>\n",
       "      <th>CC_DD</th>\n",
       "      <th>MOO</th>\n",
       "      <th>MOO_DD</th>\n",
       "      <th>ISSUANCE</th>\n",
       "      <th>ISSUANCE_DD</th>\n",
       "      <th>geometry</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2042126-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>THE ELEMENT RESTAURANT GROUP INC</td>\n",
       "      <td>181 CABRINI</td>\n",
       "      <td>854</td>\n",
       "      <td>W 181ST ST</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10033</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>12/13/2018</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>01/03/2019</td>\n",
       "      <td>Pending Review</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Pending Review</td>\n",
       "      <td>NaN</td>\n",
       "      <td>POINT (-73.93992100497887 40.85108121215804)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1139678-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>THE ORIGINAL VINCENT'S, ESTABLISHED 1904 INC.</td>\n",
       "      <td>NaN</td>\n",
       "      <td>119</td>\n",
       "      <td>MOTT ST</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10013</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>Waived</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>Issued</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>POINT (-73.99731247308198 40.71786474110945)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2038120-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>LUKE'S LOUNGE INC</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1808</td>\n",
       "      <td>HONE AVE</td>\n",
       "      <td>BRONX</td>\n",
       "      <td>NY</td>\n",
       "      <td>10461</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>02/28/2019</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>03/21/2019</td>\n",
       "      <td>Approved</td>\n",
       "      <td>05/02/2019</td>\n",
       "      <td>Issued</td>\n",
       "      <td>05/02/2019</td>\n",
       "      <td>POINT (-73.85497001294844 40.84922986597552)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1193339-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>EISEN &amp; SON, INC.</td>\n",
       "      <td>LASAGNA RESTAURANT</td>\n",
       "      <td>196</td>\n",
       "      <td>8TH AVE</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10011</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Issued</td>\n",
       "      <td>09/18/2017</td>\n",
       "      <td>POINT (-73.99979069006966 40.74322630997722)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2028248-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>BILTMORE GARAGE RESTAURANT ASSOCIATES LLC</td>\n",
       "      <td>MEL'S BURGER BAR</td>\n",
       "      <td>1450</td>\n",
       "      <td>2ND AVE</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10021</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Approved</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>Approved</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>Issued</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>POINT (-73.95649231137126 40.77099765829954)</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 48 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   LICENSE_NBR LIC_STATUS                                  BUSINESS_NAME  \\\n",
       "0  2042126-DCA     Active               THE ELEMENT RESTAURANT GROUP INC   \n",
       "1  1139678-DCA     Active  THE ORIGINAL VINCENT'S, ESTABLISHED 1904 INC.   \n",
       "2  2038120-DCA     Active                              LUKE'S LOUNGE INC   \n",
       "3  1193339-DCA     Active                              EISEN & SON, INC.   \n",
       "4  2028248-DCA     Active      BILTMORE GARAGE RESTAURANT ASSOCIATES LLC   \n",
       "\n",
       "       BUSINESS_NAME2 BUILDING      STREET      CITY STATE    ZIP    SWC_TYPE  \\\n",
       "0         181 CABRINI      854  W 181ST ST  NEW YORK    NY  10033  Unenclosed   \n",
       "1                 NaN      119     MOTT ST  NEW YORK    NY  10013  Unenclosed   \n",
       "2                 NaN     1808    HONE AVE     BRONX    NY  10461  Unenclosed   \n",
       "3  LASAGNA RESTAURANT      196     8TH AVE  NEW YORK    NY  10011  Unenclosed   \n",
       "4    MEL'S BURGER BAR     1450     2ND AVE  NEW YORK    NY  10021  Unenclosed   \n",
       "\n",
       "   ...  HEARING_DD  HEARING_PUBLIC  HEARING_PUBLIC_DD                     CC  \\\n",
       "0  ...  12/13/2018             NaN                NaN  Review Period Expired   \n",
       "1  ...  01/19/2018             NaN                NaN  Review Period Expired   \n",
       "2  ...  02/28/2019             NaN                NaN  Review Period Expired   \n",
       "3  ...         NaN             NaN                NaN                    NaN   \n",
       "4  ...  12/14/2017             NaN                NaN               Approved   \n",
       "\n",
       "        CC_DD             MOO      MOO_DD        ISSUANCE ISSUANCE_DD  \\\n",
       "0  01/03/2019  Pending Review         NaN  Pending Review         NaN   \n",
       "1  01/19/2018          Waived  01/19/2018          Issued  01/19/2018   \n",
       "2  03/21/2019        Approved  05/02/2019          Issued  05/02/2019   \n",
       "3         NaN             NaN         NaN          Issued  09/18/2017   \n",
       "4  12/14/2017        Approved  12/14/2017          Issued  12/14/2017   \n",
       "\n",
       "                                       geometry  \n",
       "0  POINT (-73.93992100497887 40.85108121215804)  \n",
       "1  POINT (-73.99731247308198 40.71786474110945)  \n",
       "2  POINT (-73.85497001294844 40.84922986597552)  \n",
       "3  POINT (-73.99979069006966 40.74322630997722)  \n",
       "4  POINT (-73.95649231137126 40.77099765829954)  \n",
       "\n",
       "[5 rows x 48 columns]"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "sidewalk_gdf.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Snap all locations to line\n",
    "- Wanted to run the algorithm on the entire dataset\n",
    "- It was too memory intensive\n",
    "- Split the data into borough level chunks to work"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Find the nearest line to student nodee"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [],
   "source": [
    "def snap_to_line(point, line_gdf, spatial_index):\n",
    "    nearest_line_index = list(spatial_index.nearest(point.bounds))\n",
    "    line = line_gdf['geometry'].iloc[nearest_line_index[0]]\n",
    "    point_snapped = line.interpolate(line.project(point))\n",
    "    return point_snapped,nearest_line_index[0]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Create spatial index"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "spatial_index = lion_gdf.sindex"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [],
   "source": [
    "sidewalk_gdf[['nearest_point_on_line','on_line']] = sidewalk_gdf.apply(lambda row: snap_to_line(row['geometry'],lion_gdf, spatial_index), axis=1, result_type = 'expand')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>LICENSE_NBR</th>\n",
       "      <th>LIC_STATUS</th>\n",
       "      <th>BUSINESS_NAME</th>\n",
       "      <th>BUSINESS_NAME2</th>\n",
       "      <th>BUILDING</th>\n",
       "      <th>STREET</th>\n",
       "      <th>CITY</th>\n",
       "      <th>STATE</th>\n",
       "      <th>ZIP</th>\n",
       "      <th>SWC_TYPE</th>\n",
       "      <th>...</th>\n",
       "      <th>HEARING_PUBLIC_DD</th>\n",
       "      <th>CC</th>\n",
       "      <th>CC_DD</th>\n",
       "      <th>MOO</th>\n",
       "      <th>MOO_DD</th>\n",
       "      <th>ISSUANCE</th>\n",
       "      <th>ISSUANCE_DD</th>\n",
       "      <th>geometry</th>\n",
       "      <th>nearest_point_on_line</th>\n",
       "      <th>on_line</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2042126-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>THE ELEMENT RESTAURANT GROUP INC</td>\n",
       "      <td>181 CABRINI</td>\n",
       "      <td>854</td>\n",
       "      <td>W 181ST ST</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10033</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>01/03/2019</td>\n",
       "      <td>Pending Review</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Pending Review</td>\n",
       "      <td>NaN</td>\n",
       "      <td>POINT (-73.93992100497887 40.85108121215804)</td>\n",
       "      <td>POINT (-73.93989685705797 40.85132131512788)</td>\n",
       "      <td>65509</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1139678-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>THE ORIGINAL VINCENT'S, ESTABLISHED 1904 INC.</td>\n",
       "      <td>NaN</td>\n",
       "      <td>119</td>\n",
       "      <td>MOTT ST</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10013</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>Waived</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>Issued</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>POINT (-73.99731247308198 40.71786474110945)</td>\n",
       "      <td>POINT (-73.99716714163807 40.71777462231699)</td>\n",
       "      <td>67875</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2038120-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>LUKE'S LOUNGE INC</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1808</td>\n",
       "      <td>HONE AVE</td>\n",
       "      <td>BRONX</td>\n",
       "      <td>NY</td>\n",
       "      <td>10461</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>03/21/2019</td>\n",
       "      <td>Approved</td>\n",
       "      <td>05/02/2019</td>\n",
       "      <td>Issued</td>\n",
       "      <td>05/02/2019</td>\n",
       "      <td>POINT (-73.85497001294844 40.84922986597552)</td>\n",
       "      <td>POINT (-73.85497716139835 40.84922428758369)</td>\n",
       "      <td>13383</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1193339-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>EISEN &amp; SON, INC.</td>\n",
       "      <td>LASAGNA RESTAURANT</td>\n",
       "      <td>196</td>\n",
       "      <td>8TH AVE</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10011</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Issued</td>\n",
       "      <td>09/18/2017</td>\n",
       "      <td>POINT (-73.99979069006966 40.74322630997722)</td>\n",
       "      <td>POINT (-73.99972826980175 40.74337448032719)</td>\n",
       "      <td>60047</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2028248-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>BILTMORE GARAGE RESTAURANT ASSOCIATES LLC</td>\n",
       "      <td>MEL'S BURGER BAR</td>\n",
       "      <td>1450</td>\n",
       "      <td>2ND AVE</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10021</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Approved</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>Approved</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>Issued</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>POINT (-73.95649231137126 40.77099765829954)</td>\n",
       "      <td>POINT (-73.95666905608053 40.77112649759413)</td>\n",
       "      <td>57296</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 50 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   LICENSE_NBR LIC_STATUS                                  BUSINESS_NAME  \\\n",
       "0  2042126-DCA     Active               THE ELEMENT RESTAURANT GROUP INC   \n",
       "1  1139678-DCA     Active  THE ORIGINAL VINCENT'S, ESTABLISHED 1904 INC.   \n",
       "2  2038120-DCA     Active                              LUKE'S LOUNGE INC   \n",
       "3  1193339-DCA     Active                              EISEN & SON, INC.   \n",
       "4  2028248-DCA     Active      BILTMORE GARAGE RESTAURANT ASSOCIATES LLC   \n",
       "\n",
       "       BUSINESS_NAME2 BUILDING      STREET      CITY STATE    ZIP    SWC_TYPE  \\\n",
       "0         181 CABRINI      854  W 181ST ST  NEW YORK    NY  10033  Unenclosed   \n",
       "1                 NaN      119     MOTT ST  NEW YORK    NY  10013  Unenclosed   \n",
       "2                 NaN     1808    HONE AVE     BRONX    NY  10461  Unenclosed   \n",
       "3  LASAGNA RESTAURANT      196     8TH AVE  NEW YORK    NY  10011  Unenclosed   \n",
       "4    MEL'S BURGER BAR     1450     2ND AVE  NEW YORK    NY  10021  Unenclosed   \n",
       "\n",
       "   ...  HEARING_PUBLIC_DD                     CC       CC_DD             MOO  \\\n",
       "0  ...                NaN  Review Period Expired  01/03/2019  Pending Review   \n",
       "1  ...                NaN  Review Period Expired  01/19/2018          Waived   \n",
       "2  ...                NaN  Review Period Expired  03/21/2019        Approved   \n",
       "3  ...                NaN                    NaN         NaN             NaN   \n",
       "4  ...                NaN               Approved  12/14/2017        Approved   \n",
       "\n",
       "       MOO_DD        ISSUANCE  ISSUANCE_DD  \\\n",
       "0         NaN  Pending Review          NaN   \n",
       "1  01/19/2018          Issued   01/19/2018   \n",
       "2  05/02/2019          Issued   05/02/2019   \n",
       "3         NaN          Issued   09/18/2017   \n",
       "4  12/14/2017          Issued   12/14/2017   \n",
       "\n",
       "                                       geometry  \\\n",
       "0  POINT (-73.93992100497887 40.85108121215804)   \n",
       "1  POINT (-73.99731247308198 40.71786474110945)   \n",
       "2  POINT (-73.85497001294844 40.84922986597552)   \n",
       "3  POINT (-73.99979069006966 40.74322630997722)   \n",
       "4  POINT (-73.95649231137126 40.77099765829954)   \n",
       "\n",
       "                          nearest_point_on_line on_line  \n",
       "0  POINT (-73.93989685705797 40.85132131512788)   65509  \n",
       "1  POINT (-73.99716714163807 40.71777462231699)   67875  \n",
       "2  POINT (-73.85497716139835 40.84922428758369)   13383  \n",
       "3  POINT (-73.99972826980175 40.74337448032719)   60047  \n",
       "4  POINT (-73.95666905608053 40.77112649759413)   57296  \n",
       "\n",
       "[5 rows x 50 columns]"
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "sidewalk_gdf.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Plot the visualization"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [],
   "source": [
    "line_index = lion_gdf.iloc[sidewalk_gdf['on_line'].iloc[0]]\n",
    "point = sidewalk_gdf['geometry'].iloc[0]\n",
    "point_on_line = sidewalk_gdf['nearest_point_on_line'].iloc[0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Street</th>\n",
       "      <th>SAFStreetN</th>\n",
       "      <th>FeatureTyp</th>\n",
       "      <th>SegmentTyp</th>\n",
       "      <th>IncExFlag</th>\n",
       "      <th>RB_Layer</th>\n",
       "      <th>NonPed</th>\n",
       "      <th>TrafDir</th>\n",
       "      <th>TrafSrc</th>\n",
       "      <th>SpecAddr</th>\n",
       "      <th>...</th>\n",
       "      <th>RLo_Hyphen</th>\n",
       "      <th>RHi_Hyphen</th>\n",
       "      <th>FromLeft</th>\n",
       "      <th>ToLeft</th>\n",
       "      <th>FromRight</th>\n",
       "      <th>ToRight</th>\n",
       "      <th>Join_ID</th>\n",
       "      <th>SHAPE_Leng</th>\n",
       "      <th>distance</th>\n",
       "      <th>geometry</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>EAST 168 STREET</td>\n",
       "      <td>None</td>\n",
       "      <td>0</td>\n",
       "      <td>U</td>\n",
       "      <td>None</td>\n",
       "      <td>B</td>\n",
       "      <td>None</td>\n",
       "      <td>T</td>\n",
       "      <td>DOT</td>\n",
       "      <td>None</td>\n",
       "      <td>...</td>\n",
       "      <td>596</td>\n",
       "      <td>716</td>\n",
       "      <td>599</td>\n",
       "      <td>699</td>\n",
       "      <td>596</td>\n",
       "      <td>716</td>\n",
       "      <td>2251001000000</td>\n",
       "      <td>437.282030</td>\n",
       "      <td>0.001442</td>\n",
       "      <td>LINESTRING (-73.90346685864002 40.830353796457...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>WEST 192 STREET</td>\n",
       "      <td>None</td>\n",
       "      <td>0</td>\n",
       "      <td>U</td>\n",
       "      <td>None</td>\n",
       "      <td>B</td>\n",
       "      <td>None</td>\n",
       "      <td>A</td>\n",
       "      <td>DOT</td>\n",
       "      <td>None</td>\n",
       "      <td>...</td>\n",
       "      <td>63</td>\n",
       "      <td>99</td>\n",
       "      <td>58</td>\n",
       "      <td>98</td>\n",
       "      <td>63</td>\n",
       "      <td>99</td>\n",
       "      <td>2798401000000</td>\n",
       "      <td>279.360551</td>\n",
       "      <td>0.000954</td>\n",
       "      <td>LINESTRING (-73.90120067721222 40.866613078165...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>UNION AVENUE</td>\n",
       "      <td>None</td>\n",
       "      <td>0</td>\n",
       "      <td>U</td>\n",
       "      <td>None</td>\n",
       "      <td>B</td>\n",
       "      <td>None</td>\n",
       "      <td>W</td>\n",
       "      <td>DOT</td>\n",
       "      <td>None</td>\n",
       "      <td>...</td>\n",
       "      <td>1016</td>\n",
       "      <td>1084</td>\n",
       "      <td>1017</td>\n",
       "      <td>1079</td>\n",
       "      <td>1016</td>\n",
       "      <td>1084</td>\n",
       "      <td>2728001000000</td>\n",
       "      <td>618.327104</td>\n",
       "      <td>0.001752</td>\n",
       "      <td>LINESTRING (-73.90117669126199 40.824388909173...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>DELAFIELD AVENUE</td>\n",
       "      <td>None</td>\n",
       "      <td>0</td>\n",
       "      <td>U</td>\n",
       "      <td>None</td>\n",
       "      <td>B</td>\n",
       "      <td>None</td>\n",
       "      <td>T</td>\n",
       "      <td>DOT</td>\n",
       "      <td>None</td>\n",
       "      <td>...</td>\n",
       "      <td>4600</td>\n",
       "      <td>4664</td>\n",
       "      <td>4601</td>\n",
       "      <td>4645</td>\n",
       "      <td>4600</td>\n",
       "      <td>4664</td>\n",
       "      <td>2187601000000</td>\n",
       "      <td>670.281005</td>\n",
       "      <td>0.001840</td>\n",
       "      <td>LINESTRING (-73.9069566348925 40.8936079352015...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>WEST 252 STREET</td>\n",
       "      <td>None</td>\n",
       "      <td>0</td>\n",
       "      <td>U</td>\n",
       "      <td>None</td>\n",
       "      <td>B</td>\n",
       "      <td>None</td>\n",
       "      <td>T</td>\n",
       "      <td>DCP</td>\n",
       "      <td>None</td>\n",
       "      <td>...</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>2814401000000</td>\n",
       "      <td>16.897558</td>\n",
       "      <td>0.000059</td>\n",
       "      <td>LINESTRING (-73.90706510086257 40.899274141493...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 110 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "             Street SAFStreetN FeatureTyp SegmentTyp IncExFlag RB_Layer  \\\n",
       "0   EAST 168 STREET       None          0          U      None        B   \n",
       "1   WEST 192 STREET       None          0          U      None        B   \n",
       "2      UNION AVENUE       None          0          U      None        B   \n",
       "3  DELAFIELD AVENUE       None          0          U      None        B   \n",
       "4   WEST 252 STREET       None          0          U      None        B   \n",
       "\n",
       "  NonPed TrafDir TrafSrc SpecAddr  ... RLo_Hyphen RHi_Hyphen FromLeft ToLeft  \\\n",
       "0   None       T     DOT     None  ...        596        716      599    699   \n",
       "1   None       A     DOT     None  ...         63         99       58     98   \n",
       "2   None       W     DOT     None  ...       1016       1084     1017   1079   \n",
       "3   None       T     DOT     None  ...       4600       4664     4601   4645   \n",
       "4   None       T     DCP     None  ...       None       None        0      0   \n",
       "\n",
       "  FromRight ToRight        Join_ID  SHAPE_Leng  distance  \\\n",
       "0       596     716  2251001000000  437.282030  0.001442   \n",
       "1        63      99  2798401000000  279.360551  0.000954   \n",
       "2      1016    1084  2728001000000  618.327104  0.001752   \n",
       "3      4600    4664  2187601000000  670.281005  0.001840   \n",
       "4         0       0  2814401000000   16.897558  0.000059   \n",
       "\n",
       "                                            geometry  \n",
       "0  LINESTRING (-73.90346685864002 40.830353796457...  \n",
       "1  LINESTRING (-73.90120067721222 40.866613078165...  \n",
       "2  LINESTRING (-73.90117669126199 40.824388909173...  \n",
       "3  LINESTRING (-73.9069566348925 40.8936079352015...  \n",
       "4  LINESTRING (-73.90706510086257 40.899274141493...  \n",
       "\n",
       "[5 rows x 110 columns]"
      ]
     },
     "execution_count": 33,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "lion_gdf.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 50,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "0070983\n"
     ]
    }
   ],
   "source": [
    "i = lion_gdf['SegmentID'].iloc[sidewalk_gdf['on_line'].iloc[0]]\n",
    "print(i)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 53,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>LICENSE_NBR</th>\n",
       "      <th>LIC_STATUS</th>\n",
       "      <th>BUSINESS_NAME</th>\n",
       "      <th>BUSINESS_NAME2</th>\n",
       "      <th>BUILDING</th>\n",
       "      <th>STREET</th>\n",
       "      <th>CITY</th>\n",
       "      <th>STATE</th>\n",
       "      <th>ZIP</th>\n",
       "      <th>SWC_TYPE</th>\n",
       "      <th>...</th>\n",
       "      <th>HEARING_PUBLIC_DD</th>\n",
       "      <th>CC</th>\n",
       "      <th>CC_DD</th>\n",
       "      <th>MOO</th>\n",
       "      <th>MOO_DD</th>\n",
       "      <th>ISSUANCE</th>\n",
       "      <th>ISSUANCE_DD</th>\n",
       "      <th>geometry</th>\n",
       "      <th>nearest_point_on_line</th>\n",
       "      <th>on_line</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2042126-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>THE ELEMENT RESTAURANT GROUP INC</td>\n",
       "      <td>181 CABRINI</td>\n",
       "      <td>854</td>\n",
       "      <td>W 181ST ST</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10033</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>01/03/2019</td>\n",
       "      <td>Pending Review</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Pending Review</td>\n",
       "      <td>NaN</td>\n",
       "      <td>POINT (-73.93992100497887 40.85108121215804)</td>\n",
       "      <td>POINT (-73.93989685705797 40.85132131512788)</td>\n",
       "      <td>65509</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1139678-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>THE ORIGINAL VINCENT'S, ESTABLISHED 1904 INC.</td>\n",
       "      <td>NaN</td>\n",
       "      <td>119</td>\n",
       "      <td>MOTT ST</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10013</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>Waived</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>Issued</td>\n",
       "      <td>01/19/2018</td>\n",
       "      <td>POINT (-73.99731247308198 40.71786474110945)</td>\n",
       "      <td>POINT (-73.99716714163807 40.71777462231699)</td>\n",
       "      <td>67875</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2038120-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>LUKE'S LOUNGE INC</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1808</td>\n",
       "      <td>HONE AVE</td>\n",
       "      <td>BRONX</td>\n",
       "      <td>NY</td>\n",
       "      <td>10461</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Review Period Expired</td>\n",
       "      <td>03/21/2019</td>\n",
       "      <td>Approved</td>\n",
       "      <td>05/02/2019</td>\n",
       "      <td>Issued</td>\n",
       "      <td>05/02/2019</td>\n",
       "      <td>POINT (-73.85497001294844 40.84922986597552)</td>\n",
       "      <td>POINT (-73.85497716139835 40.84922428758369)</td>\n",
       "      <td>13383</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1193339-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>EISEN &amp; SON, INC.</td>\n",
       "      <td>LASAGNA RESTAURANT</td>\n",
       "      <td>196</td>\n",
       "      <td>8TH AVE</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10011</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Issued</td>\n",
       "      <td>09/18/2017</td>\n",
       "      <td>POINT (-73.99979069006966 40.74322630997722)</td>\n",
       "      <td>POINT (-73.99972826980175 40.74337448032719)</td>\n",
       "      <td>60047</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2028248-DCA</td>\n",
       "      <td>Active</td>\n",
       "      <td>BILTMORE GARAGE RESTAURANT ASSOCIATES LLC</td>\n",
       "      <td>MEL'S BURGER BAR</td>\n",
       "      <td>1450</td>\n",
       "      <td>2ND AVE</td>\n",
       "      <td>NEW YORK</td>\n",
       "      <td>NY</td>\n",
       "      <td>10021</td>\n",
       "      <td>Unenclosed</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Approved</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>Approved</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>Issued</td>\n",
       "      <td>12/14/2017</td>\n",
       "      <td>POINT (-73.95649231137126 40.77099765829954)</td>\n",
       "      <td>POINT (-73.95666905608053 40.77112649759413)</td>\n",
       "      <td>57296</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 50 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   LICENSE_NBR LIC_STATUS                                  BUSINESS_NAME  \\\n",
       "0  2042126-DCA     Active               THE ELEMENT RESTAURANT GROUP INC   \n",
       "1  1139678-DCA     Active  THE ORIGINAL VINCENT'S, ESTABLISHED 1904 INC.   \n",
       "2  2038120-DCA     Active                              LUKE'S LOUNGE INC   \n",
       "3  1193339-DCA     Active                              EISEN & SON, INC.   \n",
       "4  2028248-DCA     Active      BILTMORE GARAGE RESTAURANT ASSOCIATES LLC   \n",
       "\n",
       "       BUSINESS_NAME2 BUILDING      STREET      CITY STATE    ZIP    SWC_TYPE  \\\n",
       "0         181 CABRINI      854  W 181ST ST  NEW YORK    NY  10033  Unenclosed   \n",
       "1                 NaN      119     MOTT ST  NEW YORK    NY  10013  Unenclosed   \n",
       "2                 NaN     1808    HONE AVE     BRONX    NY  10461  Unenclosed   \n",
       "3  LASAGNA RESTAURANT      196     8TH AVE  NEW YORK    NY  10011  Unenclosed   \n",
       "4    MEL'S BURGER BAR     1450     2ND AVE  NEW YORK    NY  10021  Unenclosed   \n",
       "\n",
       "   ...  HEARING_PUBLIC_DD                     CC       CC_DD             MOO  \\\n",
       "0  ...                NaN  Review Period Expired  01/03/2019  Pending Review   \n",
       "1  ...                NaN  Review Period Expired  01/19/2018          Waived   \n",
       "2  ...                NaN  Review Period Expired  03/21/2019        Approved   \n",
       "3  ...                NaN                    NaN         NaN             NaN   \n",
       "4  ...                NaN               Approved  12/14/2017        Approved   \n",
       "\n",
       "       MOO_DD        ISSUANCE  ISSUANCE_DD  \\\n",
       "0         NaN  Pending Review          NaN   \n",
       "1  01/19/2018          Issued   01/19/2018   \n",
       "2  05/02/2019          Issued   05/02/2019   \n",
       "3         NaN          Issued   09/18/2017   \n",
       "4  12/14/2017          Issued   12/14/2017   \n",
       "\n",
       "                                       geometry  \\\n",
       "0  POINT (-73.93992100497887 40.85108121215804)   \n",
       "1  POINT (-73.99731247308198 40.71786474110945)   \n",
       "2  POINT (-73.85497001294844 40.84922986597552)   \n",
       "3  POINT (-73.99979069006966 40.74322630997722)   \n",
       "4  POINT (-73.95649231137126 40.77099765829954)   \n",
       "\n",
       "                          nearest_point_on_line on_line  \n",
       "0  POINT (-73.93989685705797 40.85132131512788)   65509  \n",
       "1  POINT (-73.99716714163807 40.71777462231699)   67875  \n",
       "2  POINT (-73.85497716139835 40.84922428758369)   13383  \n",
       "3  POINT (-73.99972826980175 40.74337448032719)   60047  \n",
       "4  POINT (-73.95666905608053 40.77112649759413)   57296  \n",
       "\n",
       "[5 rows x 50 columns]"
      ]
     },
     "execution_count": 53,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "sidewalk_gdf.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 59,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 720x720 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "i = 425\n",
    "f, ax = plt.subplots(1, figsize=(10, 10))\n",
    "\n",
    "lion_gdf.loc[lion_gdf['SegmentID'] == lion_gdf['SegmentID'].iloc[sidewalk_gdf['on_line'].iloc[i]]].plot(ax=ax)\n",
    "sidewalk_gdf = sidewalk_gdf.set_geometry('geometry')\n",
    "# Original point\n",
    "sidewalk_gdf.loc[sidewalk_gdf.index == i].plot(ax=ax, color = 'blue')\n",
    "sidewalk_gdf = sidewalk_gdf.set_geometry('nearest_point_on_line')\n",
    "# Snapped point\n",
    "sidewalk_gdf.loc[sidewalk_gdf.index == i].plot(ax=ax, color = 'red')\n",
    "\n",
    "plt.show();"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
